(function (exports) {
  'use strict';

  const renderUseCanvas = (layers) => {
  };

  /**
   *
   *
   * @export
   * @class App
   * @extends {BaseNode}
   */
  class App {
      /**
      * Creates an instance of App.
      * @param {ApplicationOptions} [options]
      * @param {number} [options.resolution]
      * The resolution / device pixel ratio of the renderer.
      * @memberof App
      */
      constructor(options) {
          this.root = null;
          this.layers = [];
          this._layersSortedByIndex = [];
          this.nodeType = 'APP';
      }
      /**
       *
       *
       * @param {HTMLDivElement} element
       * @memberof App
       */
      mount(element) {
          this.root = element;
      }
      /**
       *
       *
       * @memberof App
       */
      render() {
          this._layersSortedByIndex =
              this.layers.sort((a, b) => {
                  return a.attributes.zIndex - b.attributes.zIndex;
              });
          renderUseCanvas(this._layersSortedByIndex);
      }
      /**
       *
       * put the layers into the application
       * @memberof App
       * @param {Layer} layer - the instance of layer
       */
      append(layer) {
          // if you had not mount an element, it will create one.
          if (this.root === null) {
              this.root = document.createElement('div');
              this.root.id = 'LionRoot';
              this.root.style.width = '100%';
              this.root.style.height = '100%';
              document.body.append(this.root);
          }
          this.root.append(layer._self);
          this.layers.push(layer);
      }
  }

  let _BaseNodeId = 0;
  /**
   *
   *
   * @class BaseNode
   */
  class BaseNode {
      /**
       * Creates an instance of BaseNode.
       * @memberof BaseNode
       */
      constructor() {
          this.x = 0; // absolute position
          this.y = 0; // absolute position
          this.parent = null;
          this.children = [];
          this.nodeType = 'base';
          this.attributes = {
              width: 0,
              height: 0,
              left: 0,
              top: 0,
              zIndex: 0,
              borderRadius: 0,
              backgroundColor: '#000000',
              padding: [0, 0, 0, 0],
              margin: [0, 0, 0, 0],
          };
          Object.defineProperty(this, 'id', { value: _BaseNodeId++ });
      }
      /**
       * copy this ndoe
       */
      copy() { }
      /**
       *
       *
       * @readonly
       * @memberof BaseNode
       */
      get width() {
          return this.attributes.width;
      }
      /**
       *
       *
       * @readonly
       * @memberof BaseNode
       */
      get height() {
          return this.attributes.height;
      }
      /**
       *
       *
       * @readonly
       * @memberof BaseNode
       */
      get left() {
          return this.attributes.left;
      }
      /**
       *
       *
       * @readonly
       * @memberof BaseNode
       */
      get top() {
          return this.attributes.top;
      }
      /**
       * addEventListener
       */
      addEventListener() { }
      /**
       *
       *
       * @memberof BaseNode
       */
      removeEventListener() { }
      /**
       * removeAllListeners
       */
      removeAllListeners() { }
      /**
       *
       *
       * @memberof BaseNode
       */
      attr() { }
      /**
       *
       *
       * @memberof BaseNode
       */
      removeAttribute() { }
      /**
       *
       *
       * @param {BaseNode} child
       * @memberof BaseNode
       */
      append(child) {
          if (child instanceof BaseNode) {
              this.children.push(child);
          }
          else {
              throw new Error('only Lion node can be appended.');
          }
      }
  }

  /**
   *
   *
   * @class Block
   * @extends {BaseNode}
   */
  class Block extends BaseNode {
      /**
       * Creates an instance of Block.
       * @param {BlockOptions} options
       * @memberof Block
       */
      constructor(options) {
          super();
          this.nodeType = 'Block';
      }
  }

  /**
   *
   *
   * @class Layer
   * @extends {BaseNode}
   */
  class Layer extends BaseNode {
      /**
         * Creates an instance of Layer.
         * @memberof Layer
         * @param {Object} options Options for
         */
      constructor(options = {}) {
          super();
          this.nodeType = 'layer';
          this.attributes.zIndex = options.zIndex !== undefined ? options.zIndex : 1;
          this.attributes.backgroundColor =
              options.backgroundColor !== undefined ? options.backgroundColor : '#000000';
          this.init();
      }
      /**
       *
       *
       * @memberof Layer
       */
      init() {
          const canvas = document.createElement('canvas');
          canvas.style.position = 'absolute';
          canvas.style.width = '100%';
          canvas.style.height = '100%';
          canvas.style.backgroundColor = this.attributes.backgroundColor;
          canvas.style.zIndex = `${this.attributes.zIndex}`;
          this._self = canvas;
      }
  }

  /**
   *
   *
   * @class Sprite
   */
  class Sprite extends BaseNode {
      /**
       * Creates an instance of Sprite.
       * @memberof Sprite
       * @param {SpriteOptions} options
       */
      constructor(options) {
          super();
      }
  }

  // @ts-ignore
  window.Lion = {
      App,
      Layer,
      Block,
      Sprite,
      BaseNode,
  };

  exports.App = App;
  exports.BaseNode = BaseNode;
  exports.Block = Block;
  exports.Layer = Layer;
  exports.Sprite = Sprite;

  Object.defineProperty(exports, '__esModule', { value: true });

  return exports;

}({}));
